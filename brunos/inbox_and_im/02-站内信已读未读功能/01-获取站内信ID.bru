meta {
  name: è·å–ç«™å†…ä¿¡ID
  type: http
  seq: 1
}

get {
  url: {{host}}/api/v1/notifications?page=1&page_size=20
  body: none
  auth: inherit
}

params:query {
  page: 1
  page_size: 20
}

headers {
  User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0
  Accept: application/json
}

script:post-response {
  // æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ
  if (res.getStatus() !== 200) {
    console.error("âŒ è·å–ç«™å†…ä¿¡åˆ—è¡¨å¤±è´¥ï¼ŒçŠ¶æ€ç :", res.getStatus());
    console.error("å“åº”:", res.getBody());
    bru.setNextRequest(false);
    return;
  }

  const data = res.getBody();
  console.log("âœ… è·å–ç«™å†…ä¿¡åˆ—è¡¨æˆåŠŸ");
  console.log("ğŸ“Š æ€»æ•°:", data.total);
  console.log("ğŸ“„ å½“å‰é¡µ:", data.items.length, "æ¡");
  console.log("ğŸ“ˆ æœªè¯»æ•°é‡:", data.unread_count);

  // æå–ç¬¬ä¸€æ¡ç«™å†…ä¿¡è®°å½•çš„ IDï¼Œä¾›åç»­æµ‹è¯•ä½¿ç”¨
  if (data.items && data.items.length > 0) {
    const recordId = data.items[0].id;
    bru.setVar("recordId", recordId);
    console.log("ğŸ“Œ å·²å°†ç¬¬ä¸€æ¡ç«™å†…ä¿¡ ID ä¿å­˜åˆ°å˜é‡:", recordId);
    console.log("â„¹ï¸ ç°åœ¨å¯ä»¥è¿è¡Œã€Œæ ‡è®°å•æ¡ç«™å†…ä¿¡ä¸ºå·²è¯»ã€æˆ–ã€Œåˆ é™¤ç«™å†…ä¿¡ã€æµ‹è¯•");
  } else {
    console.warn("âš ï¸ ç«™å†…ä¿¡åˆ—è¡¨ä¸ºç©º");
    console.warn("ğŸ’¡ è¯·å…ˆè¿è¡Œã€Œ01-ç«™å†…ä¿¡å®Œæ•´æµç¨‹ã€åˆ›å»ºå’Œå‘é€ç«™å†…ä¿¡");
    bru.setNextRequest(false);
  }
}
