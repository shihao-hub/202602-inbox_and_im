meta {
  name: è·å–æœªè¯»ç«™å†…ä¿¡æ•°é‡
  type: http
  seq: 2
}

get {
  url: {{host}}/api/v1/notifications/unread-count
  body: none
  auth: inherit
}

headers {
  User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:147.0) Gecko/20100101 Firefox/147.0
  Accept: application/json
}

script:post-response {
  // æ£€æŸ¥è¯·æ±‚æ˜¯å¦æˆåŠŸ
  if (res.getStatus() !== 200) {
    console.error("âŒ è·å–æœªè¯»æ•°é‡å¤±è´¥ï¼ŒçŠ¶æ€ç :", res.getStatus());
    console.error("å“åº”:", res.getBody());
    bru.setNextRequest(false);
    return;
  }

  const data = res.getBody();
  console.log("âœ… è·å–æœªè¯»æ•°é‡æˆåŠŸ");
  console.log("ğŸ“Š æœªè¯»ç«™å†…ä¿¡æ•°é‡:", data.unread_count);

  // å°†æœªè¯»æ•°é‡ä¿å­˜åˆ°å˜é‡ä¸­ï¼Œä¾›åç»­æµ‹è¯•ä½¿ç”¨
  bru.setVar("unreadCount", data.unread_count);

  // å¦‚æœæ²¡æœ‰æœªè¯»æ¶ˆæ¯ï¼Œæç¤ºç”¨æˆ·éœ€è¦å…ˆåˆ›å»ºç«™å†…ä¿¡
  if (data.unread_count === 0) {
    console.warn("âš ï¸ å½“å‰æ²¡æœ‰æœªè¯»ç«™å†…ä¿¡ï¼Œè¯·å…ˆè¿è¡Œã€Œ01-ç«™å†…ä¿¡å®Œæ•´æµç¨‹ã€åˆ›å»ºå’Œå‘é€ç«™å†…ä¿¡");
  }
}
